<?xml version="1.0" encoding="UTF-8"?>
<con:testCase failOnError="true" failTestCaseOnErrors="true" id="37d6c15b-96e6-44f5-a842-1155cc0424e9" keepSession="false" maxResults="0" name="Simple Search TestCase" searchProperties="true" xmlns:con="http://eviware.com/soapui/config">
  <con:description>TestCase - Simple Search TestCase


                The test extends the previous TastCases by doing a simple search between login and logout.

                We are using a Property Transfer Step to move password and user name from a Properties Step to the
                Request and a second Property Transfer Step to move the sessionID we got in the login response to the
                logout request..</con:description>
  <con:settings>
    <con:setting id="37d6c15b-96e6-44f5-a842-1155cc0424e9fileName">Simple-Search-TestCase</con:setting>
  </con:settings>
  <con:testStep id="89c5ad92-cfb7-4c99-a960-f2c60eb5d79f" name="Start Virt Service" type="VirtRunnerTestStep">
    <con:settings/>
    <con:config>
      <url>localhost</url>
      <server>ServiceSoapBinding MockService</server>
      <action>run</action>
    </con:config>
  </con:testStep>
  <con:testStep id="b6948edb-7d4e-4204-86d4-92d2d6cf62d5" name="Properties - Username and Password" type="properties">
    <con:settings/>
    <con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:properties>
        <con:property>
          <con:name>Username</con:name>
          <con:value>Logini${=String.valueOf(Math.random()).substring( 0, 5 )}</con:value>
        </con:property>
        <con:property>
          <con:name>Password</con:name>
          <con:value>Logini123</con:value>
        </con:property>
        <con:property>
          <con:name>SearchPhrase</con:name>
          <con:value>Item 1</con:value>
        </con:property>
      </con:properties>
    </con:config>
  </con:testStep>
  <con:testStep id="02d58559-fa84-4dda-95bc-1717f1d6d7cb" name="Property Transfer - Move Username and Password" type="transfer">
    <con:settings/>
    <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:transfers failOnError="true" setNullOnMissingSource="true" transferTextContent="true">
        <con:name>TransferUser</con:name>
        <con:sourceType>Username</con:sourceType>
        <con:sourceStep>Properties - Username and Password</con:sourceStep>
        <con:targetType>Request</con:targetType>
        <con:targetStep>Test Request - login</con:targetStep>
        <con:targetPath>declare namespace sam='http://www.soapui.org/sample/';
                            //sam:login/username</con:targetPath>
        <con:upgraded>true</con:upgraded>
      </con:transfers>
      <con:transfers failOnError="true" setNullOnMissingSource="true" transferTextContent="true" transferToAll="false">
        <con:name>TransferPass</con:name>
        <con:sourceType>Password</con:sourceType>
        <con:sourceStep>Properties - Username and Password</con:sourceStep>
        <con:targetType>Request</con:targetType>
        <con:targetStep>Test Request - login</con:targetStep>
        <con:targetPath>declare namespace sam='http://www.soapui.org/sample/';
                            //sam:login/password</con:targetPath>
        <con:upgraded>true</con:upgraded>
      </con:transfers>
    </con:config>
  </con:testStep>
  <con:testStep id="15d252bf-d0e6-405c-b333-8bffbea51671" name="Test Request - login" type="request">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>ServiceSoapBinding</con:interface>
      <con:operation>login</con:operation>
      <con:request defaultIncomingWss="" defaultOutgoingWss="" id="aae200cd-99dd-447d-8e3e-8764973741d9" incomingWss="" name="Test Request - login" outgoingWss="">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>http://127.0.0.1:8082/mockServiceSoapBinding</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:sam="http://www.soapui.org/sample/">
 <soapenv:Header/>
 <soapenv:Body>
 <sam:login>
 <username>Logini${=String.valueOf(Math.random()).substring( 0, 5 )}</username>
 <password>Logini123</password>
 </sam:login>
 </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion id="8e05e168-aef7-4ab9-9ea1-83b2c5e04028" type="SOAP Response"/>
        <con:assertion id="152ddb5e-9cfc-4544-94d0-dada001db561" type="Schema Compliance">
          <con:configuration/>
        </con:assertion>
        <con:assertion id="964d174d-aac8-4398-bf67-d1614a293d15" type="SOAP Fault Assertion"/>
        <con:credentials>
          <con:username/>
          <con:password/>
          <con:domain/>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:jmsPropertyConfig/>
        <con:wsaConfig mustUnderstand="NONE" version="200508"/>
        <con:wsrmConfig version="1.2"/>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep id="56ba9493-c8e8-4dbc-9e2d-4d80807e1b5d" name="Property Transfer - Move sessionID" type="transfer">
    <con:settings/>
    <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:transfers failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferTextContent="true" transferToAll="false">
        <con:name>MoveSessionId</con:name>
        <con:sourceType>Response</con:sourceType>
        <con:sourceStep>Test Request - login</con:sourceStep>
        <con:sourcePath>declare namespace sam='http://www.soapui.org/sample/';
                            //sam:loginResponse/sessionid</con:sourcePath>
        <con:targetType>Request</con:targetType>
        <con:targetStep>Test Request - logout</con:targetStep>
        <con:targetPath>declare namespace sam='http://www.soapui.org/sample/';
                            //sam:logout/sessionid</con:targetPath>
        <con:upgraded>true</con:upgraded>
      </con:transfers>
      <con:transfers failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferTextContent="true" transferToAll="false">
        <con:name>moveSessionID Search</con:name>
        <con:sourceType>Response</con:sourceType>
        <con:sourceStep>Test Request - login</con:sourceStep>
        <con:sourcePath>declare namespace sam='http://www.soapui.org/sample/';
                            //sam:loginResponse/sessionid</con:sourcePath>
        <con:targetType>Request</con:targetType>
        <con:targetStep>Test Request - search</con:targetStep>
        <con:targetPath>declare namespace sam='http://www.soapui.org/sample/';
                            //sam:search/sessionid</con:targetPath>
        <con:upgraded>true</con:upgraded>
      </con:transfers>
      <con:transfers failOnError="true" ignoreEmpty="false" setNullOnMissingSource="true" transferTextContent="true" transferToAll="false">
        <con:name>MoveSearchstring</con:name>
        <con:sourceType>SearchPhrase</con:sourceType>
        <con:sourceStep>Properties - Username and Password</con:sourceStep>
        <con:sourcePath/>
        <con:targetType>Request</con:targetType>
        <con:targetStep>Test Request - search</con:targetStep>
        <con:targetPath>declare namespace sam='http://www.soapui.org/sample/';
                            //sam:search/searchstring</con:targetPath>
        <con:upgraded>true</con:upgraded>
      </con:transfers>
    </con:config>
  </con:testStep>
  <con:testStep id="23ecd0ca-1d62-483e-97ea-08885a2f37a7" name="Test Request - search" type="request">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>ServiceSoapBinding</con:interface>
      <con:operation>search</con:operation>
      <con:request defaultIncomingWss="" defaultOutgoingWss="" id="be8bed2f-01b1-42c5-81cf-77f214f80f80" incomingWss="" name="Test Request - search" outgoingWss="">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>http://127.0.0.1:8082/mockServiceSoapBinding</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:sam="http://www.soapui.org/sample/">
 <soapenv:Header/>
 <soapenv:Body>
 <sam:search>
 <sessionid>1433832600579079</sessionid>
 <searchstring>Item 1</searchstring>
 </sam:search>
 </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion id="13dfe896-8a12-4251-a9a6-8a39a5c361f2" type="SOAP Response"/>
        <con:assertion id="8949605c-5db9-472e-95d2-4e17cbdf2ad6" type="Schema Compliance">
          <con:configuration/>
        </con:assertion>
        <con:assertion id="facc7da7-6aae-47ac-82be-caef7612e9d5" type="SOAP Fault Assertion"/>
        <con:credentials>
          <con:username/>
          <con:password/>
          <con:domain/>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:jmsPropertyConfig/>
        <con:wsaConfig mustUnderstand="NONE" version="200508"/>
        <con:wsrmConfig version="1.2"/>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep id="124d8aaa-086b-416d-9293-4d12afdd053e" name="Test Request - logout" type="request">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>ServiceSoapBinding</con:interface>
      <con:operation>logout</con:operation>
      <con:request defaultIncomingWss="" defaultOutgoingWss="" id="6baf5ea7-ecab-46fe-a596-2238a8dbd3e9" incomingWss="" name="Test Request - logout" outgoingWss="">
        <con:settings/>
        <con:encoding>UTF-8</con:encoding>
        <con:endpoint>http://127.0.0.1:8082/mockServiceSoapBinding</con:endpoint>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:sam="http://www.soapui.org/sample/">
 <soapenv:Header/>
 <soapenv:Body>
 <sam:logout>
 <sessionid>1433832600579079</sessionid>
 </sam:logout>
 </soapenv:Body>
</soapenv:Envelope>]]></con:request>
        <con:assertion id="491e9272-1496-4782-8eea-635ad0cade69" type="SOAP Response"/>
        <con:assertion id="e0948e39-f37d-4d9a-9acd-d01ac8056cad" type="Schema Compliance">
          <con:configuration/>
        </con:assertion>
        <con:credentials>
          <con:username/>
          <con:password/>
          <con:domain/>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:jmsPropertyConfig/>
        <con:wsaConfig mustUnderstand="NONE" version="200508"/>
        <con:wsrmConfig version="1.2"/>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep id="0c16226c-d868-45d9-9675-38b7f1845e82" name="Stop Virt Service" type="VirtRunnerTestStep">
    <con:settings/>
    <con:config>
      <url>localhost</url>
      <server>ServiceSoapBinding MockService</server>
      <action>stop</action>
    </con:config>
  </con:testStep>
  <con:properties/>
  <con:reportParameters/>
  <con:breakPoints>
    <con:testStepId>89c5ad92-cfb7-4c99-a960-f2c60eb5d79f</con:testStepId>
    <con:status>NONE</con:status>
    <con:properties/>
  </con:breakPoints>
</con:testCase>
